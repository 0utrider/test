<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Society Downtime Income Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&family=Cinzel:wght@400;600&family=PT+Sans:wght@400;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">
  <div id="background-layer"></div>
  <div id="overlay-layer"></div>

  <div id="app">
    <header class="app-header">
      <div class="title-block">
        <img src="img/icon-logo.webp" alt="Downtime Icon" class="title-icon" onerror="this.style.display='none';" />
        <h1 class="app-title">Society Downtime Income Calculator</h1>
      </div>

      <div class="header-controls">
        <div class="system-toggle">
          <label>
            <input type="radio" name="system" value="pf2" checked />
            <span>PF2</span>
          </label>
          <label>
            <input type="radio" name="system" value="sf2" />
            <span>SF2</span>
          </label>
        </div>

        <div class="theme-toggle">
          <label class="toggle-label">
            <input type="checkbox" id="lightModeToggle" />
            <span class="toggle-custom"></span>
            <span class="toggle-text">Light Mode</span>
          </label>
        </div>
      </div>
    </header>

    <main>
      <!-- Critical error banner -->
      <div id="error-banner" class="banner banner-error hidden">
        Critical reference file missing. Please check downtime CSV files and reload.
      </div>

      <!-- Copy confirmation banner -->
      <div id="copy-banner" class="banner banner-copy hidden">
        Summary copied to clipboard.
      </div>

      <!-- General Input -->
      <section class="card" id="general-input">
        <h2>General Input</h2>
        <div class="form-row">
          <label for="dateInput">Date</label>
          <input type="date" id="dateInput" />
        </div>
        <div class="form-row">
          <label for="scenarioInput">Scenario Number</label>
          <input type="text" id="scenarioInput" maxlength="100" />
          <div class="field-error" data-error-for="scenarioInput"></div>
        </div>
      </section>

      <!-- Characters Input -->
      <section class="card" id="characters-input">
        <h2>Characters</h2>
        <div id="character-rows"></div>
      </section>

      <!-- Summary -->
      <section class="card" id="summary-section">
        <h2>Summary</h2>
        <pre id="summary-output" class="summary-output"></pre>
        <button id="copy-summary-btn" class="btn" title="Copy to Clipboard">ðŸ“‹ Copy</button>
      </section>

      <!-- Appendix -->
      <section class="card" id="appendix-section">
        <button id="appendix-toggle" class="btn btn-secondary">
          Show Appendix
        </button>

        <div id="appendix-content" class="appendix hidden">
          <h2>Appendix</h2>

          <div class="appendix-block">
            <h3>Acronyms</h3>
            <ul>
              <li>DC â€“ Difficulty Class</li>
              <li>EL â€“ Effective Level</li>
              <li>GP â€“ gold points</li>
              <li>CR â€“ credits</li>
              <li>HHST â€“ Horizon Hunters: Storied Talent</li>
              <li>TEML â€“ Trained, Expert, Master, Legendary</li>
            </ul>
          </div>

          <div class="appendix-block">
            <h3>Glossary</h3>
            <p>
              Downtime â€“ a means to earn extra income between missions.
              See: https://lorespire.paizo.com/tiki-index.php?page=pfs2guide._.After-the-Adventure#Downtime
            </p>
          </div>

          <div class="appendix-block">
            <h3>Downtime Income Table</h3>
            <div id="downtime-table-container"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
